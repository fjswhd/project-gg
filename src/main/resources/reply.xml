<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="replyns">

	<!-- 댓글 리스트 -->
	<select id="rpList" parameterType="integer" resultType ="reply">
		select * from (select a.*, rowNum rn, nickname from(select * from reply order by re_no desc)a ,member m where a.m_id = m.m_id)
		 <!-- where rn between #{startRow} and #{endRow} -->
	</select>
	
	<!-- 새댓글 번호 구하기 -->
	<select id="maxNo" resultType="integer">
		select nvl(max(re_no),0) + 1 from reply
	</select>
	   
	<!-- 댓글 입력 -->
	<insert id="insert" parameterType="integer">
		insert into reply values( 1, 1, 'b', '안녕', 0, 0, sysdate, 'n' , 'n' )
<!-- 		insert into reply values( #{re_no}, #{b_no}, #{m_id}, #{content}, 0, 0, sysdate, #{secret} , 'n' ) -->
	</insert>
	
	<!-- 댓글 수정 -->
	<update id="update">
		update reply set content=#{content}, secret=#{secret}
	</update>

</mapper>